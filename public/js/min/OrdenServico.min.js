$(document).ready(function(){$(document).on('click','#ConfirmarRecebimentoPecas',function(e){Swal.fire({title:'Recebimento de Peças',icon:'question',html:'Confirma o recebimento das peças solicitadas para iniciar o atendimento ?',confirmButtonColor:'#A9D18E',denyButtoColor:'#F6CECE',TextColor:'#0a0a0a',showDenyButton:!0,confirmButtonText:'Confirmar',denyButtonText:`Cancelar`,}).then((result)=>{if(result.isConfirmed){$.ajax({type:"POST",url:'PortalAt/OrdenServico/'+$(this).attr("id")+'',dataType:"json",data:{DATAREF:$(this).attr("data-ref")},beforeSend:function(){Carregamento()},success:function(data){Alerta('error','Oops...',data,"#f52525");if(data==200){$('#CAT_SITUACAO').find('[value="AT"]').attr('selected',!0);var form=$('form[id="Recarregar"]');form.submit()}}})}})})});$(document).ready(function(){$('#file').change(function(){var i=$(this).prev('label').clone();if($('#file')[0].files[0]!=undefined){if($('#file')[0].files[0].size<1048576){var file=$('#file')[0].files[0].name;$(this).prev('label').text(""+file.slice(0,19)+"...")}else{Alerta('error','Oops...','Tamanho de arquivo inválido,limite de 1MB !',"#f52525")}}})});$("#NovaOS").on('submit',function(e){Swal.fire({title:'Confirmação',icon:'question',html:$(this).attr("title"),confirmButtonColor:'#A9D18E',denyButtoColor:'#F6CECE',TextColor:'#0a0a0a',showDenyButton:!0,confirmButtonText:'Confirmar',denyButtonText:`Cancelar`,}).then((result)=>{if(result.isConfirmed){e.preventDefault();var form=$(this);var formData=new FormData(this);$.ajax({url:form.attr('action'),type:'POST',data:formData,beforeSend:function(){Carregamento()},success:function(data){if(data==200){$('#form-field').val('');document.getElementById("file").value="";$('#NFI_REFERENCIA_NOS').val('');$('#NFI_DESCRICAO_NOS').val('');$('#RSI_REFERENCIA_NOS').val('');$('#PRO_DESCRICAO_NOS').val('');$('#CAT_ARQUIVODOC_NOS').val('');$('#CAT_DATACOMPRA_NOS').val('');$('#CAT_LOCALCOMPRA_NOS').val('');$('#CAT_NOMECLIENTE_NOS').val('');$('#CCI_DEFEITOTEC_NOS').val('');$('#CAT_NUMEROOS_NOS').val('');$('#CAT_OBSERVACOES_NOS').val('');$('#BOTAO_SUBMIT_NOS').val('');$("#RSI_NUMEROSERIE").attr('readonly',!1);$("#NFI_REFERENCIA_NOS").attr('disabled',!0);$("#NFI_DESCRICAO_NOS").attr('disabled',!0);$("#NFI_REFERENCIA_NOS").attr('readonly',!0);$("#NFI_DESCRICAO_NOS").attr('readonly',!0);$("#RSI_REFERENCIA_NOS").attr('disabled',!0);$("#PRO_DESCRICAO_NOS").attr('disabled',!0);$("#CAT_ARQUIVODOC_NOS").attr('disabled',!0);$("#CAT_DATACOMPRA_NOS").attr('disabled',!0);$("#CAT_LOCALCOMPRA_NOS").attr('disabled',!0);$("#CAT_NOMECLIENTE_NOS").attr('disabled',!0);$("#CCI_DEFEITOTEC_NOS").attr('disabled',!0);$('#CAT_OBSERVACOES_NOS').attr('disabled',!0);$("#CAT_NUMEROOS_NOS").attr('disabled',!0);$("#ARQUIVO_NOS").attr('disabled',!0);$("#BOTAO_SUBMIT_NOS").attr('disabled',!0);$('#NovaOs').modal('hide');$('#file-label').html('Escolher Arquivo');$('#CAT_SITUACAO').find("[value="+'PN','AP','PE','EA'+"]").attr('selected',!0);$('#MES').find("[value='"+mes+"']").attr('selected',!0);var form=$('form[id="Recarregar"]');form.submit();Sucesso()}Alerta('error','Oops...',data,"#f52525")},cache:!1,contentType:!1,processData:!1,xhr:function(){var myXhr=$.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener('progress',function(){},!1)}return myXhr}})}})});$('#NaoPrecisaPeca').on("click",function(event){if(document.getElementById('NaoPrecisaPeca').checked==!0){Swal.fire({title:'Solicitação de Peças',icon:'question',html:'Atendimento não precisa de peças ?',confirmButtonColor:'#A9D18E',denyButtoColor:'#F6CECE',TextColor:'#0a0a0a',showDenyButton:!0,confirmButtonText:'Confirmar',denyButtonText:`Cancelar`,}).then((result)=>{if(result.isConfirmed){$.ajax({type:"POST",url:'PortalAt/OrdenServico/PegaCCI',data:{DATAREF:$('#DATAREF-GLOBAL').val()},success:function(data){$("#accordionFlushExample").remove();document.getElementById('NaoPrecisaPeca').checked=!0;$("#SolicitacaoDePecasModal").append(data)}})}else{document.getElementById('NaoPrecisaPeca').checked=!1}})}if(document.getElementById('NaoPrecisaPeca').checked==!1){$.ajax({type:"POST",url:'PortalAt/OrdenServico/'+$(this).attr("id")+'',dataType:"json",data:{DATAREF:$('#DATAREF-GLOBAL').val()},beforeSend:function(){Carregamento()},success:function(data){$("#CCI_CODIGO").remove();$("#SEM_PECAS").remove();$("#Volta").remove();$("#Teste").html(data);Swal.close()}})}});$('#BuscaNumeroDeSerie').on("click",function(event){event.preventDefault();$.ajax({type:"POST",url:'PortalAt/OrdenServico/BuscaNumeroDeSerie',data:{NUMERODESERIE:$('#RSI_NUMEROSERIE').val()},beforeSend:function(){Carregamento()},success:function(data){$.each(data,function(key,row){$('#NFI_REFERENCIA_NOS').val(row.NFI_REFERENCIA);$('#NFI_DESCRICAO_NOS').val(row.NFI_DESCRICAO);$('#RSI_REFERENCIA_NOS').val(row.RSI_REFERENCIA);$('#PRO_DESCRICAO_NOS').val(row.PRO_DESCRICAO);$('#CAT_ARQUIVODOC_NOS').val(row.CAT_ARQUIVODOC);$('#CAT_DATACOMPRA_NOS').val(row.CAT_DATACOMPRA);$('#CAT_LOCALCOMPRA_NOS').val(row.CAT_LOCALCOMPRA);$('#CAT_NOMECLIENTE_NOS').val(row.CAT_NOMECLIENTE);$('#CCI_DEFEITOTEC_NOS').val(row.CCI_DEFEITOTEC);$('#CAT_NUMEROOS_NOS').val(row.CAT_NUMEROOS);$('#CAT_OBSERVACOES_NOS').val(row.CAT_OBSERVACOES);$('#BOTAO_SUBMIT_NOS').val(row.CAT_NUMEROOS)});$("#NFI_REFERENCIA_NOS").attr('disabled',!1);$("#NFI_DESCRICAO_NOS").attr('disabled',!1);$("#NFI_REFERENCIA_NOS").attr('readonly',!0);$("#NFI_DESCRICAO_NOS").attr('readonly',!0);$("#RSI_REFERENCIA_NOS").attr('disabled',!1);$("#PRO_DESCRICAO_NOS").attr('disabled',!1);$("#CAT_ARQUIVODOC_NOS").attr('disabled',!1);$("#CAT_DATACOMPRA_NOS").attr('disabled',!1);$("#CAT_LOCALCOMPRA_NOS").attr('disabled',!1);$("#CAT_NOMECLIENTE_NOS").attr('disabled',!1);$("#CCI_DEFEITOTEC_NOS").attr('disabled',!1);$('#CAT_OBSERVACOES_NOS').attr('disabled',!1);$("#CAT_NUMEROOS_NOS").attr('disabled',!1);$("#ARQUIVO_NOS").attr('disabled',!1);$("#BOTAO_SUBMIT_NOS").attr('disabled',!1);Swal.close()}})});